@section scripts
{
    @Scripts.Render("~/bundles/bootstrap-datepicker")  
    <script>
        $(function () {
            // Source: http://goo.gl/iPeJZ
            $('.datepicker').datepicker();

            var stations = [];
            $.getJSON('Json/stations.json', function (data) {
                console.log('success');
                $.each(data.stations, function (i, station) {
                    stations.push(station.zh_TW);
                });
            }).error(function () {
                console.log('error');
            });
            $('#FromStation').typeahead({ source: stations });
            $('#ToStation').typeahead({ source: stations });
        });
        // UNDOEN
        (function ($) {
            Train = Backbone.Model.extend({
                initialize: function ()
                {

                }
            });
            Trains = Backbone.Collection.extend({
                initialize: function ()
                {
                    
                },
                model: Train,
                url: 'Json/stations.json'

            });
            Station = Backbone.Model.extend({
                initialize: function ()
                {
                }
            });
            Stations = Backbone.Collection.extend({
                initialize: function ()
                { },
                model: Station,
                url: 'Json/station.json'
            });

            AppView = Backbone.View.extend({
                el: $('#app'),
                initialize: function () {
                    _.bindAll(this, 'render');
                    this.stations = new Stations();
                    var that = this;
                    this.stations.fetch({
                        success: function () {
                            that.render();
                        }
                    });
                },
                render: function ()
                {
                    var table = _.template($('#tisTable').html());
                    var tbody = table.children('tbody');
                    var td = _.template($('#tisRow').html());
                }
                
            });
        })(jQuery);
    </script>

    <style type="text/css">
        .form-block {
            max-width: 200px;
            padding: 19px 29px 29px;
            margin: 0 auto 20px;
            background-color: #fff;
            -webkit-box-shadow: 0 1px 2px rgba(0,0,0,.05);
            -moz-box-shadow: 0 1px 2px rgba(0,0,0,.05);
            box-shadow: 0 1px 2px rgba(0,0,0,.05);
        }
        .pnl {
            display:none;
        }
        .active {
            display:block;
        }
    </style>
}
<!-- Autocompleted: http://goo.gl/JUcw6  Typehead: http://goo.gl/WrNQx -->
<div id="app" class="container">
    <div id="pnlPrompt" class="pnl active">
        <form class="form-block">
            <div class="input-prepend">
                <span class="add-on">起</span>
                <input class="span2" id="FromStation" type="text" placeholder="台北">
            </div>

            <div class="controls center span2">
            </div>

            <div class="input-prepend input-append">
                <span class="add-on">迄</span>
                <input class="span2" id="ToStation" type="text" placeholder="高雄">
                <button class="btn btn-info"><i class="icon-resize-vertical"></i></button>
            </div>

            <div class="input-append date datepicker" id="GetinDate" data-date="@DateTime.Now.ToString("yyyy/MM/dd")" data-date-format="yyyy/mm/dd">
                <input class="span2" size="16" type="text" value="@DateTime.Now.ToString("yyyy/MM/dd")"/>
                <span class="add-on"><i class="icon-th"></i></span>
            </div>

            <div class="controls">
                <button class="btn btn-large btn-primary" type="submit">Query</button>
            </div>
        </form>
    </div>
    <!--/pnlPrompt -->
    <div id="pnlResult" class="pnl">
        <table>
            <thead>
                <tr>
                    <th>列車車次</th>
                    <th>列車車種</th>
                    <th>起點站</th>
                    <th>離站時間</th>
                    <th>終點站</th>
                    <th>到站時間</th>
                    <th>行駛 山、海線或無經過</th>
                    <th>備註</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>
     <!--/pnlResult -->
    <hr />
    © @DateTime.Now.Year <a href="https://github.com/CalvertYang">Calvert</a> &amp; <a href="https://github.com/AndyYou">Andy</a>
</div>

<script type="text/template" id='tisRow'>
    <tr>
        <td><%=train %></td>
        <td><%=carClass %></td>
        <td><%=origin %></td>
        <td><%=depTime %></td>
        <td><%=dest %></td>
        <td><%=arrTime %></td>
        <td><%=line %></td>
        <td><%=note %></td>
    </tr>
</script>
